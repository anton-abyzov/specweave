{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://spec-weave.com/schemas/specweave-config.json",
  "title": "SpecWeave Configuration",
  "description": "Schema for .specweave/config.yaml configuration file",
  "type": "object",
  "properties": {
    "plugins": {
      "type": "object",
      "description": "Plugin configuration",
      "properties": {
        "enabled": {
          "type": "array",
          "description": "List of enabled plugin names",
          "items": {
            "type": "string",
            "pattern": "^specweave-[a-z0-9-]+$"
          },
          "uniqueItems": true,
          "examples": [
            ["specweave-github", "specweave-frontend-stack"]
          ]
        },
        "settings": {
          "type": "object",
          "description": "Plugin-specific settings",
          "patternProperties": {
            "^specweave-[a-z0-9-]+$": {
              "type": "object",
              "description": "Settings for a specific plugin"
            }
          },
          "additionalProperties": false
        }
      },
      "required": ["enabled"],
      "additionalProperties": false
    },
    "project": {
      "type": "object",
      "description": "Project metadata",
      "properties": {
        "name": {
          "type": "string",
          "description": "Project name",
          "minLength": 1,
          "maxLength": 256
        },
        "version": {
          "type": "string",
          "description": "Project version (semver)",
          "pattern": "^\\d+\\.\\d+\\.\\d+(-[a-z0-9.-]+)?(\\+[a-z0-9.-]+)?$"
        },
        "description": {
          "type": "string",
          "description": "Project description",
          "maxLength": 1024
        }
      },
      "additionalProperties": true
    },
    "adapters": {
      "type": "object",
      "description": "Adapter configuration",
      "properties": {
        "default": {
          "type": "string",
          "description": "Default adapter to use",
          "enum": ["claude", "cursor", "copilot", "generic"]
        }
      },
      "additionalProperties": true
    },
    "language": {
      "type": "string",
      "description": "Primary language for generated content and CLI",
      "enum": ["en", "ru", "es", "zh", "de", "fr", "ja", "ko", "pt"],
      "default": "en"
    },
    "limits": {
      "type": "object",
      "description": "Work-in-progress (WIP) limits - simplified to enforce focus (v0.7.0+)",
      "properties": {
        "maxActiveIncrements": {
          "type": "number",
          "description": "Maximum active increments at any time (default: 1 for maximum focus)",
          "minimum": 1,
          "maximum": 3,
          "default": 1
        },
        "hardCap": {
          "type": "number",
          "description": "Absolute maximum active increments, never exceeded (emergency ceiling)",
          "minimum": 1,
          "maximum": 5,
          "default": 2
        },
        "allowEmergencyInterrupt": {
          "type": "boolean",
          "description": "Allow 2nd active increment for hotfix/bug emergencies",
          "default": true
        },
        "typeBehaviors": {
          "type": "object",
          "description": "Increment type-specific behaviors",
          "properties": {
            "canInterrupt": {
              "type": "array",
              "description": "Types that can interrupt existing work (emergency scenarios)",
              "items": {
                "type": "string",
                "enum": ["hotfix", "bug"]
              },
              "default": ["hotfix", "bug"]
            },
            "autoAbandonDays": {
              "type": "object",
              "description": "Auto-abandon increments after N days of inactivity",
              "properties": {
                "experiment": {
                  "type": "number",
                  "description": "Days before experiment auto-abandons",
                  "minimum": 1,
                  "default": 14
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "staleness": {
          "type": "object",
          "description": "Staleness warning thresholds (in days)",
          "properties": {
            "paused": {
              "type": "number",
              "description": "Warn if paused for more than N days",
              "minimum": 1,
              "default": 7
            },
            "active": {
              "type": "number",
              "description": "Warn if active for more than N days",
              "minimum": 1,
              "default": 30
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "translation": {
      "type": "object",
      "description": "Translation settings for multilingual support",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable/disable translation system entirely",
          "default": true
        },
        "method": {
          "type": "string",
          "description": "Translation method (always in-session for zero cost)",
          "enum": ["in-session"],
          "default": "in-session"
        },
        "autoTranslateInternalDocs": {
          "type": "boolean",
          "description": "Automatically translate spec.md, plan.md, tasks.md to English after increment planning (post-generation translation)",
          "default": true
        },
        "autoTranslateLivingDocs": {
          "type": "boolean",
          "description": "Automatically translate living docs updates after task completion",
          "default": false
        },
        "keepFrameworkTerms": {
          "type": "boolean",
          "description": "Keep framework terms (Increment, Living Docs, SpecWeave, ADR, RFC) in English",
          "default": true
        },
        "keepTechnicalTerms": {
          "type": "boolean",
          "description": "Keep technical terms (Git, Docker, Kubernetes, npm, TypeScript) in English",
          "default": true
        },
        "translateCodeComments": {
          "type": "boolean",
          "description": "Translate comments in generated code",
          "default": true
        },
        "translateVariableNames": {
          "type": "boolean",
          "description": "Translate variable/function names (NOT RECOMMENDED)",
          "default": false
        },
        "filesAlwaysInEnglish": {
          "type": "array",
          "description": "File patterns that must always be in English (glob patterns)",
          "items": {
            "type": "string"
          },
          "default": [
            "spec.md",
            "plan.md",
            "tasks.md",
            "tests.md",
            "docs/internal/**/*.md"
          ]
        },
        "translationModel": {
          "type": "string",
          "description": "LLM model to use for translation",
          "enum": ["haiku", "sonnet", "opus"],
          "default": "haiku"
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": true,
  "examples": [
    {
      "plugins": {
        "enabled": [
          "specweave-github"
        ],
        "settings": {
          "specweave-github": {
            "repo": "owner/repo",
            "auto_create_issue": true,
            "auto_update_progress": true,
            "auto_close_issue": true,
            "sync_frequency": "every-task",
            "default_labels": [
              "specweave",
              "increment"
            ],
            "milestone": "v1.0.0"
          }
        }
      },
      "project": {
        "name": "my-project",
        "version": "1.0.0",
        "description": "My SpecWeave project"
      },
      "adapters": {
        "default": "claude"
      }
    },
    {
      "plugins": {
        "enabled": [
          "specweave-github",
          "specweave-frontend-stack",
          "specweave-backend-stack"
        ],
        "settings": {
          "specweave-github": {
            "repo": "myorg/myapp",
            "auto_create_issue": true,
            "sync_frequency": "every-task"
          },
          "specweave-frontend-stack": {
            "framework": "react",
            "typescript": true,
            "styling": "tailwind"
          },
          "specweave-backend-stack": {
            "language": "typescript",
            "framework": "express",
            "database": "postgresql"
          }
        }
      },
      "project": {
        "name": "full-stack-app",
        "version": "0.1.0"
      }
    },
    {
      "language": "ru",
      "translation": {
        "enabled": true,
        "method": "in-session",
        "autoTranslateInternalDocs": true,
        "autoTranslateLivingDocs": true,
        "keepFrameworkTerms": true,
        "keepTechnicalTerms": true,
        "translateCodeComments": true,
        "translateVariableNames": false,
        "filesAlwaysInEnglish": [
          "spec.md",
          "plan.md",
          "tasks.md",
          "tests.md",
          "docs/internal/**/*.md"
        ],
        "translationModel": "haiku"
      },
      "plugins": {
        "enabled": []
      },
      "project": {
        "name": "russian-project",
        "version": "1.0.0"
      }
    },
    {
      "project": {
        "name": "enterprise-project",
        "version": "2.0.0"
      },
      "limits": {
        "maxActiveIncrements": 1,
        "hardCap": 2,
        "allowEmergencyInterrupt": true,
        "typeBehaviors": {
          "canInterrupt": ["hotfix", "bug"],
          "autoAbandonDays": {
            "experiment": 21
          }
        },
        "staleness": {
          "paused": 14,
          "active": 60
        }
      },
      "plugins": {
        "enabled": [
          "specweave-github"
        ]
      }
    }
  ]
}
