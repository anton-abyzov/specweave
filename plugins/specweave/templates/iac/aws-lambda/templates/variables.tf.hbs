# Input Variables for AWS Lambda + API Gateway + DynamoDB
# Generated by SpecWeave Serverless Architecture Intelligence

variable "aws_region" {
  description = "AWS region for all resources"
  type        = string
  default     = "{{region}}"
}

variable "function_name" {
  description = "Lambda function name"
  type        = string
  default     = "{{functionName}}"
}

variable "runtime" {
  description = "Lambda runtime (nodejs20.x, python3.12, etc.)"
  type        = string
  default     = "{{runtime}}"
}

variable "memory_size" {
  description = "Lambda memory size in MB (128-10240)"
  type        = number
  default     = {{memorySize}}
}

variable "timeout" {
  description = "Lambda timeout in seconds (1-900)"
  type        = number
  default     = {{timeout}}
}

variable "environment" {
  description = "Environment name (dev, staging, prod)"
  type        = string
  default     = "{{environment}}"
}

variable "handler" {
  description = "Lambda function handler"
  type        = string
  default     = "{{handler}}"
}

variable "database_name" {
  description = "DynamoDB table name"
  type        = string
  default     = "{{databaseName}}"
}

variable "primary_key" {
  description = "DynamoDB primary key (partition key)"
  type        = string
  default     = "{{primaryKey}}"
}

{{#if sortKey}}
variable "sort_key" {
  description = "DynamoDB sort key (range key)"
  type        = string
  default     = "{{sortKey}}"
}
{{/if}}

variable "log_retention_days" {
  description = "CloudWatch Logs retention in days"
  type        = number
  default     = {{logRetentionDays}}
}

variable "cors_origins" {
  description = "List of allowed CORS origins for API Gateway"
  type        = list(string)
  default     = {{tfList corsOrigins}}
}

{{#if enableVpc}}
variable "vpc_id" {
  description = "VPC ID for Lambda function (if VPC enabled)"
  type        = string
}

variable "subnet_ids" {
  description = "Subnet IDs for Lambda function (if VPC enabled)"
  type        = list(string)
}
{{/if}}

{{#if enableSecretsManager}}
variable "secrets_manager_arns" {
  description = "ARNs of Secrets Manager secrets to access"
  type        = list(string)
  default     = []
}
{{/if}}

{{#if enableKms}}
variable "kms_key_arn" {
  description = "KMS key ARN for encryption"
  type        = string
}
{{/if}}

variable "project_name" {
  description = "Project name for resource tagging"
  type        = string
  default     = "{{projectName}}"
}

variable "tags" {
  description = "Additional tags for all resources"
  type        = map(string)
  default     = {}
}
