# Outputs for AWS Lambda + API Gateway + DynamoDB
# Generated by SpecWeave Serverless Architecture Intelligence

output "api_endpoint" {
  description = "API Gateway endpoint URL"
  value       = aws_apigatewayv2_stage.{{snakeCase apiStageName}}.invoke_url
}

output "api_id" {
  description = "API Gateway ID"
  value       = aws_apigatewayv2_api.{{snakeCase apiName}}.id
}

output "function_name" {
  description = "Lambda function name"
  value       = aws_lambda_function.{{snakeCase functionName}}.function_name
}

output "function_arn" {
  description = "Lambda function ARN"
  value       = aws_lambda_function.{{snakeCase functionName}}.arn
}

output "function_invoke_arn" {
  description = "Lambda function invoke ARN"
  value       = aws_lambda_function.{{snakeCase functionName}}.invoke_arn
}

output "table_name" {
  description = "DynamoDB table name"
  value       = aws_dynamodb_table.{{snakeCase databaseName}}.name
}

output "table_arn" {
  description = "DynamoDB table ARN"
  value       = aws_dynamodb_table.{{snakeCase databaseName}}.arn
}

{{#if enableStreams}}
output "table_stream_arn" {
  description = "DynamoDB stream ARN"
  value       = aws_dynamodb_table.{{snakeCase databaseName}}.stream_arn
}
{{/if}}

output "lambda_role_arn" {
  description = "Lambda execution role ARN"
  value       = aws_iam_role.lambda_exec.arn
}

output "lambda_logs_group" {
  description = "CloudWatch Logs group for Lambda"
  value       = aws_cloudwatch_log_group.lambda_logs.name
}

output "api_logs_group" {
  description = "CloudWatch Logs group for API Gateway"
  value       = aws_cloudwatch_log_group.api_logs.name
}

{{#if enableVpc}}
output "lambda_security_group_id" {
  description = "Security group ID for Lambda function"
  value       = aws_security_group.lambda_sg.id
}
{{/if}}

output "deployment_summary" {
  description = "Summary of deployed resources"
  value = {
    api_endpoint   = aws_apigatewayv2_stage.{{snakeCase apiStageName}}.invoke_url
    function_name  = aws_lambda_function.{{snakeCase functionName}}.function_name
    table_name     = aws_dynamodb_table.{{snakeCase databaseName}}.name
    environment    = var.environment
    region         = var.aws_region
  }
}
