---
name: "Architecture Review - Broad Scope (Skip Optimization)"
description: "Context optimizer should skip optimization for broad architectural reviews"
skill: context-optimizer
priority: P1
estimated_time: "1-2 minutes"

input:
  prompt: "Review overall system architecture and identify integration issues"

  loaded_context:
    total_tokens: 45000
    specs:
      - name: "auth-spec.md"
        tokens: 12000
        domain: "auth"

      - name: "payment-spec.md"
        tokens: 9000
        domain: "payment"

      - name: "user-management-spec.md"
        tokens: 7000
        domain: "users"

      - name: "notification-spec.md"
        tokens: 6000
        domain: "notifications"

    docs:
      - name: "architecture/system-overview.md"
        tokens: 4000
        domain: "all"

      - name: "architecture/integration-patterns.md"
        tokens: 3000
        domain: "all"

      - name: "architecture/data-flow.md"
        tokens: 4000
        domain: "all"

expected_output:
  task_analysis:
    task_type: "architecture"
    domains: ["all"]
    scope: "broad"
    needs_full_context: true
    confidence: 0.85-0.95

  optimization_result:
    action: "skip_optimization"
    tokens_before: 45000
    tokens_after: 45000
    reduction_percentage: 0
    reason: "Broad scope requires full context"

  rationale:
    - "Architecture review needs visibility across all domains"
    - "Integration issues span multiple modules"
    - "Cannot identify cross-domain problems without full context"
    - "Design patterns require understanding of complete system"
    - "Data flow analysis requires all specs"

  warning_message: |
    ⚠️ Keeping full context (broad scope detected)

    Rationale: Architecture review needs visibility across all domains
    to identify integration issues, dependencies, and design patterns.

    Token usage: 45,000 tokens (no reduction applied)

validation:
  - "Task type detected as 'architecture'"
  - "Scope: broad"
  - "needs_full_context: true"
  - "No optimization applied"
  - "All specs retained"
  - "All docs retained"
  - "Clear rationale provided"
  - "Warning message shown"
  - "Confidence >= 0.85"

success_criteria:
  - "Correctly identifies broad scope task"
  - "Skips optimization entirely"
  - "No context removed"
  - "Clear explanation to user why optimization skipped"
  - "High confidence in decision"

edge_cases:
  similar_prompts_requiring_full_context:
    - "Design system architecture"
    - "Explain how all modules integrate"
    - "Review for security issues across system"
    - "Identify dependencies between features"
    - "Plan major refactoring across modules"
---
